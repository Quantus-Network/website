---
import Layout from "@/components/layout/Layout.astro";

import Socials from "@/components/ui/Socials.astro";
import SphereDecoration from "@/components/ui/SphereDecoration.astro";
import ContactForm from "@/components/features/contact/ContactForm.astro";
import {
  getLocaleFromUrl,
  createTranslator,
  getLocalizedMetadata,
  SUPPORTED_LOCALES,
} from "@/utils/i18n";
import type { SEOProps } from "astro-seo";
import env from "@/config";
import { JsonLd } from "@/utils/build-json-ld";
import type { BreadcrumbList } from "schema-dts";

export async function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({ params: { lang } }));
}

const locale = getLocaleFromUrl(Astro.url.pathname);
const localizedMetadata = await getLocalizedMetadata(locale);
const t = await createTranslator(locale);

const metadata: SEOProps = {
  ...localizedMetadata,
  title: "About Us",
  canonical: `${env.SITE_BASE_URL}/${locale}/contact`,
};

const jsonLd = JsonLd<BreadcrumbList>({
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    {
      "@type": "ListItem",
      position: 1,
      name: "Home",
      item: `${env.SITE_BASE_URL}`,
    },
    {
      "@type": "ListItem",
      position: 2,
      name: metadata.title,
      item: metadata.canonical as string,
    },
  ],
});
---

<Layout {...metadata} jsonLd={jsonLd}>
  <section
    class="relative overflow-hidden px-[30px] pt-[67px] pb-[75px] lg:pb-[145px]"
  >
    <SphereDecoration
      class="absolute top-[5rem] -left-[3rem] -z-10"
      variant="4"
      size={152}
    />
    <SphereDecoration
      class="absolute top-[13rem] -right-[11rem] -z-10"
      variant="12"
      size={302}
    />
    <SphereDecoration
      class="absolute bottom-[2rem] -left-[2rem] -z-10"
      variant="13"
      size={185}
    />

    <div class="max-w-content mx-auto flex flex-col">
      <h1
        class="text-contact-title lg:font-large-title font-large-title-mobile mb-[7px] w-fit"
      >
        {t("contact.title")}
      </h1>
      <p class="font-tag-mobile lg:font-tag mb-[22px] opacity-70 lg:mb-[46px]">
        {t("contact.subtitle")}
      </p>

      <ContactForm />
    </div>
  </section>

  <Socials />
</Layout>
