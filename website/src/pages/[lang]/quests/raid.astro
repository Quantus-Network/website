---
import Layout from "@/components/layout/Layout.astro";

import Leaderboard from "@/components/features/quests/raid/leaderboard/Leaderboard.astro";
import HeroBanner from "@/components/features/quests/hero-banner/HeroBanner.astro";

import {
  getLocaleFromUrl,
  createTranslator,
  SUPPORTED_LOCALES,
} from "@/utils/i18n";
import BodyLayout from "@/components/features/quests/body-layout/BodyLayout.astro";
import Rules from "@/components/features/quests/raid/rules/Rules.astro";
import Information from "@/components/features/quests/raid/information/Information.astro";
import { JsonLdGraph } from "@/utils/build-json-ld";
import { androidAppJsonLd, iosAppJsonLd } from "@/constants/default-jsonld";
import { createMetadata } from "@/utils/create-metadata";

export async function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({ params: { lang } }));
}

const locale = getLocaleFromUrl(Astro.url.pathname);
const t = await createTranslator(locale);

const metadata = createMetadata({
  title: t("quests.meta.title"),
  description: t("quests.meta.description"),
  pathname: Astro.url.pathname,
});

const jsonLd = JsonLdGraph({
  "@context": "https://schema.org",
  "@graph": [androidAppJsonLd, iosAppJsonLd],
});
---

<Layout {...metadata} jsonLd={jsonLd}>
  <HeroBanner />

  <BodyLayout>
    <Information />
    <Leaderboard />
    <Rules />
  </BodyLayout>
</Layout>
