---
import Layout from "@/components/layout/Layout.astro";
import HeroBanner from "@/components/features/home/hero-banner/HeroBanner.astro";
import IntroductionVideo from "@/components/features/home/introduction-video/IntroductionVideo.astro";
import Benefits from "@/components/features/home/benefits/Benefits.astro";
import Teams from "@/components/features/home/teams/Teams.astro";
import Roadmap from "@/components/features/home/roadmap/Roadmap.astro";
import Events from "@/components/features/home/events/Events.astro";
import AppDownload from "@/components/features/home/app-download/AppDownload.astro";
import Socials from "@/components/ui/Socials.astro";
import { createTranslator, getLocaleFromUrl } from "@/utils/i18n";
import { JsonLdGraph } from "@/utils/build-json-ld";
import env from "@/config";
import defaultMetadata from "@/constants/default-metadata";
import {
  websiteJsonLd,
  androidAppJsonLd,
  iosAppJsonLd,
  organizationJsonLd,
} from "@/constants/default-jsonld";
import type { SEOProps } from "astro-seo";

const locale = getLocaleFromUrl(Astro.url.pathname);
const t = await createTranslator(locale);

const metadata: SEOProps = {
  ...defaultMetadata,
  title: t("home.meta.title"),
  description: t("home.meta.description"),
  canonical: `${env.SITE_BASE_URL}`,
};

const jsonLd = JsonLdGraph({
  "@context": "https://schema.org",
  "@graph": [websiteJsonLd, organizationJsonLd, iosAppJsonLd, androidAppJsonLd],
});
---

<Layout {...metadata} jsonLd={jsonLd}>
  <HeroBanner />
  <IntroductionVideo />
  <Benefits />
  <AppDownload />
  <Teams />
  <Roadmap />
  <Events />
  <Socials />
</Layout>
